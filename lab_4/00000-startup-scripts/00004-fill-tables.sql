-- ЕДИНИЦЫ ИЗМЕРЕНИЯ
INSERT INTO unit (id, name) VALUES
  ('20000000-0000-0000-0000-000000000001','м'),
  ('20000000-0000-0000-0000-000000000002','мин'),
  ('20000000-0000-0000-0000-000000000003','раз');

-- АГРЕГАЦИИ
INSERT INTO agregation (id, name) VALUES
  ('30000000-0000-0000-0000-000000000001','сумма'),
  ('30000000-0000-0000-0000-000000000002','среднее'),
  ('30000000-0000-0000-0000-000000000003','максимум');

-- АКТИВНОСТИ
INSERT INTO activity (id, name) VALUES
  ('10000000-0000-0000-0000-000000000001','бег'),
  ('10000000-0000-0000-0000-000000000002','плавание'),
  ('10000000-0000-0000-0000-000000000003','велосипед'),
  ('10000000-0000-0000-0000-000000000004','отжимания'),
  ('10000000-0000-0000-0000-000000000005','приседания');

-- МЕТРИКИ
INSERT INTO metrics (id, name, unit_id) VALUES
  ('40000000-0000-0000-0000-000000000001','дистанция','20000000-0000-0000-0000-000000000001'),
  ('40000000-0000-0000-0000-000000000002','время','20000000-0000-0000-0000-000000000002'),
  ('40000000-0000-0000-0000-000000000003','повторения','20000000-0000-0000-0000-000000000003');

-- ДОПУСТИМЫЕ МЕТРИКИ ДЛЯ АКТИВНОСТИ
INSERT INTO allowed_metrics_for_activity (activity_id, metrics_id) VALUES
  -- Бег: дистанция, время
  ('10000000-0000-0000-0000-000000000001','40000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000001','40000000-0000-0000-0000-000000000002'),

  -- Плавание: дистанция, время
  ('10000000-0000-0000-0000-000000000002','40000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000002','40000000-0000-0000-0000-000000000002'),

  -- Велосипед: дистанция, время
  ('10000000-0000-0000-0000-000000000003','40000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000003','40000000-0000-0000-0000-000000000002'),

  -- Отжимания: повторения, время (для тестов/AMRAP)
  ('10000000-0000-0000-0000-000000000004','40000000-0000-0000-0000-000000000003'),
  ('10000000-0000-0000-0000-000000000004','40000000-0000-0000-0000-000000000002'),

  -- Приседания: повторения, время (для тестов/AMRAP)
  ('10000000-0000-0000-0000-000000000005','40000000-0000-0000-0000-000000000003'),
  ('10000000-0000-0000-0000-000000000005','40000000-0000-0000-0000-000000000002');

-- ПОЛЬЗОВАТЕЛИ
INSERT INTO "app_user" (id, username, password_hash) VALUES
  ('00000000-0000-0000-0000-000000000001','Вася','aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'),
  ('00000000-0000-0000-0000-000000000002','Петя','bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb'),
  ('00000000-0000-0000-0000-000000000003','Маша','cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc'),
  ('00000000-0000-0000-0000-000000000004','Ира','dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd'),
  ('00000000-0000-0000-0000-000000000005','Сергей','eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'),
  ('00000000-0000-0000-0000-000000000006','Дима','ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff');

-- ЦЕЛИ
INSERT INTO target (id, activity_id, metrics_id, agregation_id, user_id, period, target_value) VALUES
  -- Вася: бег, средняя дистанция 4000 м за 20 дней
  ('50000000-0000-0000-0000-000000000001','10000000-0000-0000-0000-000000000001','40000000-0000-0000-0000-000000000001','30000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000001', INTERVAL '20 days', 4000),
  -- Вася: бег, суммарное время 600 мин за 30 дней
  ('50000000-0000-0000-0000-000000000002','10000000-0000-0000-0000-000000000001','40000000-0000-0000-0000-000000000002','30000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000001', INTERVAL '30 days', 600),
  -- Маша: плавание, сумма дистанции 5000 м за 14 дней
  ('50000000-0000-0000-0000-000000000003','10000000-0000-0000-0000-000000000002','40000000-0000-0000-0000-000000000001','30000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000003', INTERVAL '14 days', 5000),
  -- Петя: велосипед, сумма дистанции 40000 м за 7 дней
  ('50000000-0000-0000-0000-000000000004','10000000-0000-0000-0000-000000000003','40000000-0000-0000-0000-000000000001','30000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000002', INTERVAL '7 days', 40000),
  -- Ира: отжимания, максимум повторений 60 за день
  ('50000000-0000-0000-0000-000000000005','10000000-0000-0000-0000-000000000004','40000000-0000-0000-0000-000000000003','30000000-0000-0000-0000-000000000003','00000000-0000-0000-0000-000000000004', INTERVAL '1 day', 60),
  -- Сергей: приседания, сумма 300 повторений за 7 дней
  ('50000000-0000-0000-0000-000000000006','10000000-0000-0000-0000-000000000005','40000000-0000-0000-0000-000000000003','30000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000005', INTERVAL '7 days', 300),
  -- Дима: бег, сумма дистанции 50000 м за 14 дней
  ('50000000-0000-0000-0000-000000000007','10000000-0000-0000-0000-000000000001','40000000-0000-0000-0000-000000000001','30000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000006', INTERVAL '14 days', 50000),
  -- Маша: плавание, среднее время 45 мин за 14 дней
  ('50000000-0000-0000-0000-000000000008','10000000-0000-0000-0000-000000000002','40000000-0000-0000-0000-000000000002','30000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000003', INTERVAL '14 days', 45),
  -- Петя: велосипед, среднее время 90 мин за 7 дней
  ('50000000-0000-0000-0000-000000000009','10000000-0000-0000-0000-000000000003','40000000-0000-0000-0000-000000000002','30000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000002', INTERVAL '7 days', 90);

-- ТРЕНИРОВКИ
INSERT INTO workout (id, activity_id, user_id, created_at) VALUES
  -- Вася (бег)
  ('60000000-0000-0000-0000-000000000001','10000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000001','2025-08-21 18:00:00+03'),
  ('60000000-0000-0000-0000-000000000002','10000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000001','2025-08-23 19:15:00+03'),
  -- Петя (велосипед)
  ('60000000-0000-0000-0000-000000000003','10000000-0000-0000-0000-000000000003','00000000-0000-0000-0000-000000000002','2025-08-20 17:30:00+03'),
  ('60000000-0000-0000-0000-000000000004','10000000-0000-0000-0000-000000000003','00000000-0000-0000-0000-000000000002','2025-08-24 10:05:00+03'),
  -- Маша (плавание)
  ('60000000-0000-0000-0000-000000000005','10000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000003','2025-08-19 08:40:00+03'),
  ('60000000-0000-0000-0000-000000000006','10000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000003','2025-08-22 07:55:00+03'),
  -- Ира (отжимания)
  ('60000000-0000-0000-0000-000000000007','10000000-0000-0000-0000-000000000004','00000000-0000-0000-0000-000000000004','2025-08-21 12:10:00+03'),
  ('60000000-0000-0000-0000-000000000008','10000000-0000-0000-0000-000000000004','00000000-0000-0000-0000-000000000004','2025-08-23 11:25:00+03'),
  -- Сергей (приседания)
  ('60000000-0000-0000-0000-000000000009','10000000-0000-0000-0000-000000000005','00000000-0000-0000-0000-000000000005','2025-08-20 09:20:00+03'),
  ('60000000-0000-0000-0000-000000000010','10000000-0000-0000-0000-000000000005','00000000-0000-0000-0000-000000000005','2025-08-26 18:45:00+03'),
  -- Дима (бег)
  ('60000000-0000-0000-0000-000000000011','10000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000006','2025-08-21 20:10:00+03'),
  ('60000000-0000-0000-0000-000000000012','10000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000006','2025-08-25 07:35:00+03');

-- ИЗМЕРЕНИЯ
INSERT INTO measurement (id, workout_id, metrics_id, value) VALUES
  -- Вася (бег)
  ('70000000-0000-0000-0000-000000000001','60000000-0000-0000-0000-000000000001','40000000-0000-0000-0000-000000000001',4156),
  ('70000000-0000-0000-0000-000000000002','60000000-0000-0000-0000-000000000001','40000000-0000-0000-0000-000000000002',32),
  ('70000000-0000-0000-0000-000000000003','60000000-0000-0000-0000-000000000002','40000000-0000-0000-0000-000000000001',3800),
  ('70000000-0000-0000-0000-000000000004','60000000-0000-0000-0000-000000000002','40000000-0000-0000-0000-000000000002',30),

  -- Петя (велосипед)
  ('70000000-0000-0000-0000-000000000005','60000000-0000-0000-0000-000000000003','40000000-0000-0000-0000-000000000001',15000),
  ('70000000-0000-0000-0000-000000000006','60000000-0000-0000-0000-000000000003','40000000-0000-0000-0000-000000000002',45),
  ('70000000-0000-0000-0000-000000000007','60000000-0000-0000-0000-000000000004','40000000-0000-0000-0000-000000000001',22000),
  ('70000000-0000-0000-0000-000000000008','60000000-0000-0000-0000-000000000004','40000000-0000-0000-0000-000000000002',70),

  -- Маша (плавание)
  ('70000000-0000-0000-0000-000000000009','60000000-0000-0000-0000-000000000005','40000000-0000-0000-0000-000000000001',1200),
  ('70000000-0000-0000-0000-000000000010','60000000-0000-0000-0000-000000000005','40000000-0000-0000-0000-000000000002',40),
  ('70000000-0000-0000-0000-000000000011','60000000-0000-0000-0000-000000000006','40000000-0000-0000-0000-000000000001',1800),
  ('70000000-0000-0000-0000-000000000012','60000000-0000-0000-0000-000000000006','40000000-0000-0000-0000-000000000002',55),

  -- Ира (отжимания)
  ('70000000-0000-0000-0000-000000000013','60000000-0000-0000-0000-000000000007','40000000-0000-0000-0000-000000000003',48),
  ('70000000-0000-0000-0000-000000000014','60000000-0000-0000-0000-000000000008','40000000-0000-0000-0000-000000000003',62),

  -- Сергей (приседания)
  ('70000000-0000-0000-0000-000000000015','60000000-0000-0000-0000-000000000009','40000000-0000-0000-0000-000000000003',110),
  ('70000000-0000-0000-0000-000000000016','60000000-0000-0000-0000-000000000010','40000000-0000-0000-0000-000000000003',130),

  -- Дима (бег)
  ('70000000-0000-0000-0000-000000000017','60000000-0000-0000-0000-000000000011','40000000-0000-0000-0000-000000000001',8000),
  ('70000000-0000-0000-0000-000000000018','60000000-0000-0000-0000-000000000011','40000000-0000-0000-0000-000000000002',60),
  ('70000000-0000-0000-0000-000000000019','60000000-0000-0000-0000-000000000012','40000000-0000-0000-0000-000000000001',12000),
  ('70000000-0000-0000-0000-000000000020','60000000-0000-0000-0000-000000000012','40000000-0000-0000-0000-000000000002',85);

-- fill with random
INSERT INTO app_user (id, username, password_hash)
SELECT 
    gen_random_uuid(), 
    'user_' || substring(md5(random()::text), 1, 8),
    md5(random()::text) || md5(random()::text)
FROM generate_series(1, 100000);

INSERT INTO measurement (id, workout_id, metrics_id, value)
SELECT 
    gen_random_uuid(),
    CASE 
        WHEN random() < 0.5 THEN 
            '60000000-0000-0000-0000-000000000001'::uuid
        ELSE 
            '60000000-0000-0000-0000-000000000002'::uuid
    END AS workout_id,
    '40000000-0000-0000-0000-000000000001'::uuid, 
    floor(random() * 10000 + 1)::bigint 
FROM generate_series(1, 100000);

INSERT INTO measurement (id, workout_id, metrics_id, value)
VALUES (
    gen_random_uuid(),
    '60000000-0000-0000-0000-000000000003'::uuid,
    '40000000-0000-0000-0000-000000000003'::uuid,
    100
);

INSERT INTO activity (id, name)
SELECT 
    gen_random_uuid() as id,
    CASE 
        WHEN random() < 0.3333 THEN 
            substring(md5(random()::text), 1, 3) || 
            'swimming' || 
            substring(md5(random()::text), 1, 3)
        ELSE 
            substring(md5(random()::text), 1, 16)
    END as name
FROM generate_series(1, 100000);

SET enable_hashjoin=off;
SET enable_hashagg=off;