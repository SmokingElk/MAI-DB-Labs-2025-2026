BEGIN;
SELECT id FROM workout WHERE activity_id = '10000000-0000-0000-0000-000000000001';
-- exec another tx here
SELECT id FROM workout WHERE activity_id = '10000000-0000-0000-0000-000000000001';
COMMIT;
END;

BEGIN;
INSERT INTO workout(id, activity_id, user_id, created_at) 
VALUES (
    '60000000-0000-0000-0000-000000000111',
    '10000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000001',
    '2025-08-21 18:00:00+03'
);
COMMIT;
END;

-- fixed
BEGIN ISOLATION LEVEL REPEATABLE READ;
SELECT id FROM workout WHERE activity_id = '10000000-0000-0000-0000-000000000001';
-- exec another tx here
SELECT id FROM workout WHERE activity_id = '10000000-0000-0000-0000-000000000001';
COMMIT;
END;

BEGIN ISOLATION LEVEL REPEATABLE READ;
INSERT INTO workout(id, activity_id, user_id, created_at) 
VALUES (
    '60000000-0000-0000-0000-000000000112',
    '10000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000001',
    '2025-08-21 18:00:00+03'
);
COMMIT;
END;